import{Bd as g,Dd as u,Fd as w,Gd as c,Id as o,Jd as p,Ld as F,Md as h,Nd as n,Od as d,Pd as y,U as C,_,a as f,f as s,i as D,u as O}from"./chunk-NAS4OXTP.js";var k=(()=>{class i{constructor(){this._firestore=_(g)}getOrdersWithStatus(r){let e=c(this._firestore,"orders"),t=n(e,y("status","==",r),h("createdDate","asc"));return u(t,{idField:"id"})}getOrdersWithAnyParameter(){let r=c(this._firestore,"orders"),e=n(r,h("createdDate","asc"));return u(e,{idField:"id"})}getOrderById(r){return s(this,null,function*(){let e=o(this._firestore,`orders/${r}`),t=yield p(e);if(t.exists())return f({id:r},t.data());throw new Error("No such document!")})}addOrder(r){let e=c(this._firestore,"orders");return w(e,r)}updateOrderStatusField(r,e,t){return s(this,null,function*(){let a=o(this._firestore,`orders/${r}`);return d(a,{[e]:t}).then(()=>{}).catch(l=>{console.error("Error actualizando el campo:",l)})})}setOrderAsChecked(r){return s(this,null,function*(){let e=o(this._firestore,`orders/${r}`);return d(e,{isChecked:1}).then(()=>{}).catch(t=>{console.error("Error actualizando el campo:",t)})})}cancelOrder(r){return s(this,null,function*(){let e=o(this._firestore,`orders/${r}`);return d(e,{status:0}).then(()=>{}).catch(t=>{console.error("Error cancelando el pedido:",t)})})}setOrderAsPaid(r){return s(this,null,function*(){let e=o(this._firestore,`orders/${r}`);return d(e,{pendingPayment:!1}).then(()=>{}).catch(t=>{console.error("Error pagando el pedido:",t)})})}getOrderHistoryByState(r){let e=c(this._firestore,"orderHistory"),t=n(e,y("status","==",r),h("createdDate","asc"));return u(t,{idField:"id"})}getOrderByIdHistory(r){return s(this,null,function*(){let e=o(this._firestore,`orderHistory/${r}`),t=yield p(e);if(t.exists())return f({id:r},t.data());throw new Error("No such document!")})}setOrderAsCheckedHistory(r){let e=o(this._firestore,`orderHistory/${r}`);return d(e,{isChecked:1}).then(()=>{}).catch(t=>{console.error("Error actualizando el campo:",t)})}validateCurrentOrdersIds(r){let e=c(this._firestore,"orders"),t=n(e,y("id","in",r));return u(t,{idField:"id"}).pipe(O(a=>a.map(l=>l.id)))}listenForOrdersChanges(){let r=c(this._firestore,"orders"),e=n(r,h("createdDate","asc"));return new D(t=>{let a=F(e,l=>{let E=l.docs.map(m=>f({id:m.id},m.data()));t.next(E)});return()=>a()})}static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275prov=C({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();export{k as a};

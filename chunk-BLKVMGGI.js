import{a as V}from"./chunk-WP34KY6G.js";import{a as N}from"./chunk-ELXEUX6N.js";import{a as J}from"./chunk-FKQ6VRYC.js";import{$b as O,Ec as j,Gc as B,Hb as l,Hc as F,Ib as M,Jb as s,Kb as E,Mc as G,Oc as D,Pb as k,Pc as z,Ra as r,Rb as w,Sa as T,Sb as C,Tb as $,Zb as c,_b as m,ca as P,e as Z,f as H,fa as X,fb as u,hb as p,mb as g,na as _,oa as v,pa as S,qa as I,qb as i,rb as o,sb as x,wb as b,xa as U,xb as y,yb as f}from"./chunk-DGTG4CQ7.js";var A=(()=>{class t{transform(e){return e?Object.keys(e).length:0}static{this.\u0275fac=function(a){return new(a||t)}}static{this.\u0275pipe=X({name:"keysLength",type:t,pure:!0,standalone:!0})}}return t})();var h=Z(J());var W=(t,d)=>[t,d,"w-auto text-xs font-medium inline-flex items-center justify-center px-3.5 py-0.5 rounded border lowercase ml-4"],Y=(t,d)=>[t,d,"w-auto text-sm font-medium inline-flex items-center justify-center gap-1 px-3.5 py-0.5 rounded border"],ee=t=>[t],te=t=>({"!bg-transparent !border-2 border-slate-5-00 !text-slate-500":t});function ie(t,d){t&1&&x(0,"i",16)}function ne(t,d){t&1&&x(0,"i",40)}function re(t,d){if(t&1&&(i(0,"div",47)(1,"p",48),l(2),o()()),t&2){let e=f().$implicit;r(2),s(" ** ",e.additionalInstructions," ")}}function oe(t,d){if(t&1&&(i(0,"div",41)(1,"div",42)(2,"div",43)(3,"p",44),l(4),i(5,"span",45),l(6,"x"),o()(),i(7,"p",46),l(8),c(9,"uppercase"),o()(),i(10,"p",32),l(11),c(12,"currency"),o()(),u(13,re,3,1,"div",47),o()),t&2){let e=d.$implicit;r(4),M(e.quantity),r(4),E("",e.name," - ",m(9,5,e.category),""),r(3),s("MX ",m(12,7,e.price*e.quantity),""),r(2),g(13,e.additionalInstructions?13:-1)}}function ae(t,d){if(t&1&&(i(0,"div",30)(1,"p",27),l(2,"Pago"),o(),i(3,"p",28),l(4),c(5,"currency"),o()()),t&2){let e=f();r(4),s("MX ",m(5,1,e.order.moneyChange),"")}}function le(t,d){if(t&1&&(i(0,"div",49)(1,"p",50),l(2,"Cambio"),o(),i(3,"p",32),l(4),c(5,"currency"),o()()),t&2){let e=f();r(4),s("MX ",m(5,1,e.order.moneyChange-e.order.totalAmount),"")}}function de(t,d){if(t&1){let e=b();i(0,"button",51),y("click",function(){_(e);let n=f();return v(n.cancelOrder(n.order.id))}),x(1,"i",52),o()}}function se(t,d){if(t&1){let e=b();i(0,"button",51),y("click",function(){_(e);let n=f();return v(n.payOrder(n.order.id))}),x(1,"i",53),o()}}var q=(()=>{class t{constructor(e){this._ordersService=e,this.order=null,this.orderStatus=0,this.close=new U,this.statuses={0:{text:"Cancelado",color:"red-700",textToChangeStatus:"Pedido cancelado"},2:{text:"Preparando",color:"yellow-600",textToChangeStatus:"Entregado!"},3:{text:"Entregado",color:"gray-500",textToChangeStatus:"Pedido entregado"}}}ngOnInit(){}updateStatus(e){this.orderStatus===3||this.orderStatus===0||this._ordersService.updateOrderStatusField(e,"status",this.orderStatus+1).then(()=>{console.log("Status actualizado correctamente"),this.closeModal()}).catch(a=>{console.log("Error: ",a)})}closeModal(){this.close.emit()}cancelOrder(e){h.default.fire({title:"\xBFEst\xE1s seguro?",text:"El pedido ser\xE1 cancelado",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, cancelar",cancelButtonText:"No, mantener",confirmButtonColor:"red",reverseButtons:!0}).then(a=>{a.isConfirmed&&this.cancelOrderConfirmed(e)})}cancelOrderConfirmed(e){this._ordersService.cancelOrder(e).then(()=>{h.default.fire("Pedido cancelado","El pedido ha sido cancelado","success"),this.closeModal()}).catch(a=>{h.default.fire("Error","No se pudo cancelar el pedido","error"),console.log("Error: ",a)})}payOrder(e){h.default.fire({title:"\xBFEst\xE1s seguro?",text:"El pedido ser\xE1 marcado como pagado",icon:"warning",showCancelButton:!0,confirmButtonText:"S\xED, marcar como pagado",cancelButtonText:"No, mantener",confirmButtonColor:"blue",reverseButtons:!0}).then(a=>{a.isConfirmed&&this.payOrderConfirmed(e)})}payOrderConfirmed(e){this._ordersService.setOrderAsPaid(e).then(()=>{h.default.fire("Pedido pagado","El pedido ha sido marcado como pagado","success"),this.closeModal()}).catch(a=>{h.default.fire("Error","No se pudo marcar como pagado el pedido","error"),console.log("Error: ",a)})}static{this.\u0275fac=function(a){return new(a||t)(T(N))}}static{this.\u0275cmp=P({type:t,selectors:[["app-order-detail"]],inputs:{order:"order",orderStatus:"orderStatus"},outputs:{close:"close"},standalone:!0,features:[k],decls:63,vars:46,consts:[["id","default-modal",1,"fixed","inset-0","z-50","flex","justify-center","items-center","bg-black","bg-opacity-50"],[1,"relative","p-2","w-full","max-w-5xl","max-h-full"],[1,"relative","bg-white","shadow","rounded-lg"],[1,"flex","flex-row","items-center","justify-between","p-2","md:p-5","border-b","rounded-t"],[1,"flex","items-center","flex-wrap","gap-6"],[1,"flex","flex-col","items-start","justify-center"],[1,"text-sm","font-bold","text-gray-900","mb-2","text-wrap"],[1,"text-sm","font-bold","text-gray-900","flex","justify-center","items-center","uppercase"],[3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512","fill","currentColor",1,"size-1","mr-2"],["d","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"],[1,"nunito-extra-bold","uppercase",2,"font-size","10px"],[1,"flex","flex-col","items-start","justify-start"],[1,"nunito-regular","truncate",2,"font-size","12px"],[1,"nunito-extra-bold","truncate",2,"font-size","16px"],[1,"ml-4","flex","flex-col","items-start","justify-center","h-full"],[1,"pi","pi-exclamation-circle","text-yellow-600",2,"font-size","1.125rem"],[1,"nunito-extra-bold",3,"ngClass"],[1,"text-sm","text-gray-500"],[1,"py-3","px-4","flex","flex-row","justify-between","items-center"],[1,"text-sm","font-bold","leading-relaxed"],[1,"text-xs","font-bold","px-8","py-1","rounded-full","bg-gray-300"],[1,"h-max","md:max-h-80","overflow-y-auto"],["class","items-center border-t border-gray-200",4,"ngFor","ngForOf"],[1,"flex","justify-end","items-center","border-t","border-gray-200"],[1,"py-3","px-4","flex","flex-col","justify-end","items-center","h-auto","w-auto"],[1,"flex","flex-row","items-center","justify-between","mb-2","min-w-40"],[1,"text-xs","inline-flex","justify-end","items-center"],[1,"text-xs"],["class","flex flex-row items-center justify-between min-w-40 mb-2",4,"ngIf"],[1,"flex","flex-row","items-center","justify-between","min-w-40","mb-2"],[1,"text-sm","font-bold","inline-flex","justify-between","items-center"],[1,"text-sm","font-bold"],["class","flex flex-row items-center justify-between min-w-40",4,"ngIf"],[1,"flex","items-center","p-4","md:p-5","gap-4","rounded-b"],["type","button",1,"text-slate-800","border-2","border-slate-800","focus:outline-none","rounded-lg","text-sm","p-[14px]","text-center","box-border","hover:bg-slate-800","hover:text-white"],["type","button",1,"p-4","w-full","text-sm","font-bold","text-white","focus:outline-none","bg-slate-800","rounded-lg","hover:bg-slate-700",3,"click","ngClass"],[1,"absolute","inline-flex","items-center","justify-center","w-6","h-6","font-bold","text-gray-400","bg-white","rounded-full","-top-0.5","-end-0.5","nunito-extra-bold","shadow-lg","hover:text-slate-800","hover:cursor-pointer",2,"font-size","10px",3,"click"],["aria-hidden","true","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 14 14",1,"w-2","h-2"],["stroke","currentColor","stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"],[1,"pi","pi-check-circle","text-green-800",2,"font-size","1.125rem"],[1,"items-center","border-t","border-gray-200"],[1,"py-3","px-4","flex","flex-row","justify-between","items-center","h-12"],[1,"flex","flex-row","items-center"],[1,"text-lg","font-bold","inline-flex","justify-center","items-center"],[1,"text-sm"],[1,"ml-10","text-sm","font-bold"],[1,"flex","flex-row","items-center","h-12","bg-red-200","border-b-2","border-red-400","py-3","px-4"],[1,"text-xs","font-bold","ml-16","text-red-600"],[1,"flex","flex-row","items-center","justify-between","min-w-40"],[1,"text-sm","font-bold","inline-flex","justify-end","items-center"],["type","button",1,"text-slate-800","border-2","border-slate-800","focus:outline-none","rounded-lg","text-sm","p-[14px]","text-center","box-border","hover:bg-slate-800","hover:text-white",3,"click"],[1,"pi","pi-ban","flex","items-center","justify-center"],[1,"pi","pi-dollar","flex","items-center","justify-center"]],template:function(a,n){a&1&&(i(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"p",6),l(7),c(8,"truncate"),o(),i(9,"p",7),l(10),c(11,"truncate"),i(12,"span",8),S(),i(13,"svg",9),x(14,"path",10),o(),I(),i(15,"p",11),l(16),c(17,"uppercase"),o()()()(),i(18,"div",12)(19,"p",13),l(20,"M\xE9todo de pago:"),o(),i(21,"p",14),l(22),o()(),i(23,"div",15)(24,"span",8),u(25,ie,1,0,"i",16)(26,ne,1,0),i(27,"p",17),l(28),o()()()(),i(29,"p",18),l(30),o()(),i(31,"div",19)(32,"p",20),l(33),c(34,"keysLength"),o(),i(35,"p",21),l(36),o()(),i(37,"div",22),u(38,oe,14,9,"div",23),i(39,"div",24)(40,"div",25)(41,"div",26)(42,"p",27),l(43,"Subtotal"),o(),i(44,"p",28),l(45),c(46,"currency"),o()(),u(47,ae,6,3,"div",29),i(48,"div",30)(49,"p",31),l(50,"Total"),o(),i(51,"p",32),l(52),c(53,"currency"),o()(),u(54,le,6,3,"div",33),o()()(),i(55,"div",34),u(56,de,2,0,"button",35),i(57,"button",36),y("click",function(){return n.updateStatus(n.order.id)}),l(58),o(),u(59,se,2,0,"button",35),o()(),i(60,"div",37),y("click",function(){return n.closeModal()}),S(),i(61,"svg",38),x(62,"path",39),o()()()()),a&2&&(r(7),E("",O(8,22,n.order.client,15)," - ",n.order.phoneNumber,""),r(3),s(" #",O(11,25,n.order.id,5)," "),r(2),p("ngClass",C(36,W,"text-"+n.statuses[n.order.status].color,"border-"+n.statuses[n.order.status].color)),r(4),s(" ",m(17,28,n.statuses[n.order.status].text)," "),r(6),M(n.order.paymentMethod),r(2),p("ngClass",C(39,Y,n.order.PaymentPending?"border-yellow-600":"border-green-800",n.order.PaymentPending?"bg-yellow-100":"bg-white")),r(),g(25,n.order.PaymentPending?25:26),r(2),p("ngClass",w(42,ee,n.order.PaymentPending?"text-yellow-600":"text-green-600")),r(),s(" ",n.order.PaymentPending?"Pago Pendiente":"Pagado"," "),r(2),M(n.order.createdDate),r(3),s("",m(34,30,n.order.foodDishes)," Platillos"),r(3),s("Mesa ",n.order.assignedToTable,""),r(2),p("ngForOf",n.order.foodDishes),r(7),s("MX ",m(46,32,n.order.totalAmount),""),r(2),p("ngIf",n.order.moneyChange&&n.order.moneyChange>0),r(5),s("MX ",m(53,34,n.order.totalAmount),""),r(2),p("ngIf",n.order.moneyChange&&n.order.moneyChange>0),r(2),g(56,n.order.status!==0&&n.order.status!==3?56:-1),r(),p("ngClass",w(44,te,n.order.status===0||n.order.status===3)),r(),s(" ",n.statuses[n.order.status].textToChangeStatus," "),r(),g(59,n.order.PaymentPending?59:-1))},dependencies:[z,j,B,F,G,D,A,V]})}}return t})();var pe=t=>({"animate-bounce":t}),ce=t=>({invisible:t}),me=(t,d)=>[t,d,"w-auto text-xs font-medium inline-flex items-center justify-center px-3.5 py-0.5 rounded border"],ue=(t,d,e)=>[t,d,e,"w-auto text-xs font-medium inline-flex items-center justify-center gap-1 px-3.5 py-0.5 rounded border"],xe=t=>[t],fe=(t,d)=>({"bg-slate-800":t,"bg-c-orange-100 animate-pulse":d});function ge(t,d){t&1&&x(0,"i",17)}function ye(t,d){t&1&&x(0,"i",21)}function we(t,d){t&1&&(i(0,"span",22),l(1,"Nuevo"),o())}function he(t,d){if(t&1){let e=b();i(0,"div",3),x(1,"div",4),i(2,"div",5)(3,"p",6),l(4),c(5,"truncate"),o(),i(6,"p",7),l(7),o()(),i(8,"p",8),l(9),o(),i(10,"p",9),l(11),o(),i(12,"p",8),l(13),c(14,"keysLength"),c(15,"keysLength"),o(),i(16,"p",10),l(17),c(18,"currency"),o(),i(19,"p",11),l(20),o(),i(21,"div",12)(22,"span",13),S(),i(23,"svg",14),x(24,"path",15),o(),I(),i(25,"p",16),l(26),o()(),i(27,"span",13),u(28,ge,1,0,"i",17)(29,ye,1,0),i(30,"p",18),l(31),o()()(),i(32,"button",19),y("click",function(){let n=_(e).$implicit,L=f();return v(L.openOrderDetail(n.id))}),l(33," Ver pedido "),u(34,we,2,0,"span",20),o()()}if(t&2){let e=d.$implicit,a=f();p("ngClass",w(27,pe,e.isChecked===0)),r(),p("ngClass",w(29,ce,e.isChecked!==0)),r(3),s(" #",O(5,18,e.id,5)," "),r(3),s(" Mesa ",e.assignedToTable," "),r(2),s(" ",e.client," "),r(2),s(" ",e.createdDate," "),r(2),E(" ",m(14,21,e.foodDishes)," Platillo",m(15,23,e.foodDishes)>1?"s":""," "),r(4),s(" MX ",m(18,25,e.totalAmount)," "),r(3),s(" ",e.paymentMethod," "),r(2),p("ngClass",C(31,me,"text-"+a.statuses[e.status].color,"border-"+a.statuses[e.status].color)),r(4),s(" ",a.statuses[e.status].text," "),r(),p("ngClass",$(34,ue,e.PaymentPending?"border-yellow-600":"border-green-800",e.PaymentPending?"bg-yellow-100":"bg-white",e.PaymentPending?"animate-bounce":"")),r(),g(28,e.PaymentPending?28:29),r(2),p("ngClass",w(38,xe,e.PaymentPending?"text-yellow-600":"text-green-600")),r(),s(" ",e.PaymentPending?"Pago Pendiente":"Pagado"," "),r(),p("ngClass",C(40,fe,e.isChecked!==0,e.isChecked===0)),r(2),p("ngIf",e.isNew)}}function _e(t,d){t&1&&(i(0,"p",1),l(1," No hay pedidos "),o())}function ve(t,d){if(t&1){let e=b();i(0,"app-order-detail",23),y("close",function(){_(e);let n=f();return v(n.closeModal())}),o()}if(t&2){let e=f();p("order",e.selectedOrder)("orderStatus",e.orderStatus)}}var De=(()=>{class t{constructor(e){this._ordersService=e,this.orders=[],this.orderStatus=1,this.isHistory=!1,this.showModal=!1,this.selectedOrder=null,this.statuses={0:{text:"Cancelado",color:"red-700"},1:{text:"Por pagar",color:"blue-700"},2:{text:"Preparando",color:"yellow-600"},3:{text:"Entregado",color:"gray-500"}}}openOrderDetail(e){return H(this,null,function*(){try{let a;this.isHistory?(a=yield this._ordersService.getOrderByIdHistory(e),a.isChecked===0&&this._ordersService.setOrderAsCheckedHistory(e)):(a=yield this._ordersService.getOrderById(e),a.isChecked===0&&this._ordersService.setOrderAsChecked(e)),this.selectedOrder=a,this.showModal=!0}catch(a){console.error("Error al obtener la orden:",a)}})}closeModal(){this.showModal=!1,this.selectedOrder=null}static{this.\u0275fac=function(a){return new(a||t)(T(N))}}static{this.\u0275cmp=P({type:t,selectors:[["app-orders"]],inputs:{orders:"orders",orderStatus:"orderStatus",isHistory:"isHistory"},standalone:!0,features:[k],decls:3,vars:3,consts:[["class","w-full sm:h-auto md:h-24 mb-4 py-2 md:py-0 flex flex-col md:flex-row justify-between items-center nunito-regular gap-2 md:pl-4 sm:flex-wrap md:flex-nowrap","style","box-shadow: 0px 4px 20px 1px rgba(0, 0, 0, 0.10);",3,"ngClass",4,"ngFor","ngForOf"],[1,"text-center","text-gray-500","nunito-regular",2,"font-size","14px"],[3,"order","orderStatus","close",4,"ngIf"],[1,"w-full","sm:h-auto","md:h-24","mb-4","py-2","md:py-0","flex","flex-col","md:flex-row","justify-between","items-center","nunito-regular","gap-2","md:pl-4","sm:flex-wrap","md:flex-nowrap",2,"box-shadow","0px 4px 20px 1px rgba(0, 0, 0, 0.10)",3,"ngClass"],[1,"w-1","h-1","p-1","bg-c-orange-100","animate-ping","rounded-full",3,"ngClass"],[1,"flex","flex-col","items-center","justify-center","w-full","md:w-1/6"],[1,"w-full","text-slate-800","nunito-extra-bold","text-center","text-wrap","uppercase",2,"font-size","14px"],[1,"w-full","text-slate-800","nunito-extra-bold","text-center","text-wrap",2,"font-size","14px"],[1,"w-full","md:w-1/6","text-gray-500","text-center","md:text-start","truncate",2,"font-size","12px"],[1,"w-full","md:w-1/6","text-gray-500","truncate","text-wrap","text-center",2,"font-size","12px"],[1,"w-full","md:w-1/12","text-gray-500","truncate","text-wrap","text-center",2,"font-size","12px"],[1,"w-full","md:w-1/6","nunito-extra-bold","truncate","text-wrap","text-center",2,"font-size","12px"],[1,"w-full","md:w-1/6","h-full","flex","items-center","justify-center","flex-row","md:flex-col","gap-3"],[3,"ngClass"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512","fill","currentColor",1,"size-1","mr-2"],["d","M256 512A256 256 0 1 0 256 0a256 256 0 1 0 0 512z"],[1,"nunito-extra-bold","truncate",2,"font-size","10px"],[1,"pi","pi-exclamation-circle","text-yellow-600"],[1,"nunito-extra-bold","truncate",2,"font-size","10px",3,"ngClass"],["type","button",1,"h-full","w-full","md:w-1/6","inline-flex","items-center","justify-center","nunito-extra-bold","py-2","text-white","text-wrap","px-1",2,"font-size","14px",3,"click","ngClass"],["class","badge bg-red-500 text-white rounded-full px-2 ml-2",4,"ngIf"],[1,"pi","pi-check-circle","text-green-800"],[1,"badge","bg-red-500","text-white","rounded-full","px-2","ml-2"],[3,"close","order","orderStatus"]],template:function(a,n){a&1&&u(0,he,35,43,"div",0)(1,_e,2,0,"p",1)(2,ve,1,2,"app-order-detail",2),a&2&&(p("ngForOf",n.orders),r(),g(1,!n.orders||n.orders.length===0?1:-1),r(),p("ngIf",n.showModal))},dependencies:[z,j,B,F,D,A,q,V],styles:["@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translate3d(0,100%,0)}to{opacity:1;transform:translateZ(0)}}.fadeInUp[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeInUp;animation-duration:1s}"]})}}return t})();export{De as a};

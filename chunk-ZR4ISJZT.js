import{Ia as s,S as i,Ub as o,Y as c,cd as n,ed as d,hd as a,nd as l,pd as u}from"./chunk-3MM7HPS6.js";var S=(()=>{class t{constructor(){this._firestore=c(n),this._collectionOrders=a(this._firestore,"orders"),this.currentOrderIds=s(this.getOrderIdsFromLocalStorage()),this.orders=s([]),o(()=>{localStorage.setItem("current_orders",JSON.stringify(this.currentOrderIds()))}),o(()=>{let r=this.currentOrderIds();if(!r||r.length===0){this.orders.set([]);return}let e=r.slice(0,10),h=l(this._collectionOrders,u("__name__","in",e)),I=d(h,{idField:"id"}).subscribe(f=>{this.orders.set(f)});return()=>I.unsubscribe()},{allowSignalWrites:!0})}addOrderIdToLocalStorage(r){let e=[...this.currentOrderIds(),r];this.currentOrderIds.set(e)}getOrderIdsFromLocalStorage(){let r=localStorage.getItem("current_orders");return r?JSON.parse(r):[]}static{this.\u0275fac=function(e){return new(e||t)}}static{this.\u0275prov=i({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();export{S as a};

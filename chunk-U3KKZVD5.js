import{a as le}from"./chunk-WVUPSWBW.js";import{a as se,b as h}from"./chunk-HSFREJ4M.js";import"./chunk-SUIUQCOZ.js";import"./chunk-KDUNJVA2.js";import"./chunk-ETZAP63E.js";import{a as ie,c as Q}from"./chunk-56S4D7LA.js";import"./chunk-CYUK7DBT.js";import{a as ce}from"./chunk-HQCU6SFK.js";import"./chunk-5KBS2D2T.js";import{b as ne,e as oe,i as re,r as ae}from"./chunk-33WV6WPX.js";import"./chunk-YVNSFBRY.js";import{$a as N,$b as b,Eb as B,Fb as D,Fc as k,Gb as q,Hc as te,Ib as s,Jb as O,Kb as p,Lb as Z,Mb as Y,Nb as J,Ob as ee,Pa as F,Pc as L,Qb as E,Qc as z,Sa as a,Sb as T,Ta as w,_ as g,_b as S,da as P,gb as I,hb as G,ib as f,nb as M,oa as _,ob as U,pa as v,pb as $,qa as u,qb as W,ra as y,rb as i,rc as V,sb as r,tb as m,ua as j,xb as K,ya as X,yb as x,zb as l}from"./chunk-UBYFVHHT.js";var he=n=>({fadeOutDown:n});function Ce(n,C){if(n&1){let e=K();i(0,"section",9)(1,"div",10),m(2,"img",11),i(3,"span",12),s(4),S(5,"currency"),r()(),i(6,"h3",13),s(7),r(),i(8,"p",14),s(9),r(),i(10,"div",15)(11,"p",16),s(12,"Cantidad"),r(),i(13,"div",17)(14,"div",18),x("click",function(){_(e);let o=l();return v(o.decrementQuantity())}),u(),i(15,"svg",19),m(16,"path",20),r()(),y(),i(17,"p",21),s(18),r(),i(19,"div",18),x("click",function(){_(e);let o=l();return v(o.incrementQuantity())}),u(),i(20,"svg",19),m(21,"path",22),r()()()(),y(),i(22,"div",23)(23,"p",24),s(24,"Instrucciones adicionales"),r(),i(25,"textarea",25),ee("ngModelChange",function(o){_(e);let c=l();return J(c.additionalInstructions,o)||(c.additionalInstructions=o),v(o)}),r()(),i(26,"div",26)(27,"p",27),x("click",function(){_(e);let o=l();return v(o.updateCart(o.cartItem))}),i(28,"span"),u(),i(29,"svg",28),m(30,"path",29),r()(),s(31),S(32,"currency"),r()()()}if(n&2){let e=l();a(2),f("src",e.item.image?e.item.image:"assets/img/no-image.svg",F),a(2),p(" MX ",b(5,8,e.item.price)," "),a(3),O(e.item.name),a(2),p(" ",e.item.description," "),a(9),O(e.quantity),a(7),Y("ngModel",e.additionalInstructions),a(6),Z(" Modificar ",e.quantity," por ",b(32,10,e.item.price*e.quantity)," ")}}var pe=(()=>{class n{constructor(){this.cartService=g(h),this.cerrar=new X,this.isFadingOut=!1}ngOnInit(){if(this.itemId){this.subscription=this.cartService.getItemById(this.itemId).subscribe(t=>this.item=t);let e=this.cartService.getCartItemById(this.itemId);e&&(this.cartItem=e,this.quantity=this.cartItem.quantity,this.additionalInstructions=this.cartItem.additionalInstructions)}}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}returnToShoppingCart(){this.isFadingOut=!0,setTimeout(()=>this.cerrar.emit(),400)}incrementQuantity(){this.quantity++}decrementQuantity(){this.quantity>1&&this.quantity--}updateCart(e){e.quantity=this.quantity,e.additionalInstructions=this.additionalInstructions,this.cartService.updateCartItem(e),this.returnToShoppingCart()}static{this.\u0275fac=function(t){return new(t||n)}}static{this.\u0275cmp=P({type:n,selectors:[["app-modal-item"]],inputs:{itemId:"itemId"},outputs:{cerrar:"cerrar"},standalone:!0,features:[E],decls:10,vars:4,consts:[[1,"fixed","flex","flex-col","bottom-0","left-0","w-full","h-screen","bg-white","z-50","fadeInUp",3,"ngClass"],[1,"h-16","w-full"],[1,"h-16","px-4","flex","flex-row","justify-between","items-center"],[1,"space-x-2","p-2","rounded-full","shadow-xl",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 320 512",1,"size-6"],["d","M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"],[1,"space-x-2","p-2","rounded-full","shadow-xl","invisible"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512",1,"size-6"],["d","M352 224l-46.5 0c-45 0-81.5 36.5-81.5 81.5c0 22.3 10.3 34.3 19.2 40.5c6.8 4.7 12.8 12 12.8 20.3c0 9.8-8 17.8-17.8 17.8l-2.5 0c-2.4 0-4.8-.4-7.1-1.4C210.8 374.8 128 333.4 128 240c0-79.5 64.5-144 144-144l80 0 0-61.3C352 15.5 367.5 0 386.7 0c8.6 0 16.8 3.2 23.2 8.9L548.1 133.3c7.6 6.8 11.9 16.5 11.9 26.7s-4.3 19.9-11.9 26.7l-139 125.1c-5.9 5.3-13.5 8.2-21.4 8.2l-3.7 0c-17.7 0-32-14.3-32-32l0-64zM80 96c-8.8 0-16 7.2-16 16l0 320c0 8.8 7.2 16 16 16l320 0c8.8 0 16-7.2 16-16l0-48c0-17.7 14.3-32 32-32s32 14.3 32 32l0 48c0 44.2-35.8 80-80 80L80 512c-44.2 0-80-35.8-80-80L0 112C0 67.8 35.8 32 80 32l48 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L80 96z"],[1,"p-6","flex","flex-col","items-center","relative"],[1,"relative"],["alt","image",1,"w-52","h-52","rounded-2xl","mb-4",3,"src"],[1,"absolute","top-2","right-2","bg-c-beige-100","px-3","py-1","rounded-lg","nunito-extra-bold","text-sm","text-[#E55204]"],[1,"nunito-extra-bold","uppercase","mb-2","text-[16px]"],[1,"text-gray-600","nunito-regular","text-center","px-8","mb-4","text-sm"],[1,"w-full","flex","flex-row","p-4","mb-4","rounded-lg","justify-between","bg-gray-200"],[1,"text-sm"],[1,"flex","flex-row","items-center","justify-between","fill-gray-700"],[1,"flex","justify-center","items-center","h-6","w-6","rounded-full","bg-gray-300",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512",1,"size-3.5"],["d","M432 256c0 17.7-14.3 32-32 32L48 288c-17.7 0-32-14.3-32-32s14.3-32 32-32l352 0c17.7 0 32 14.3 32 32z"],[1,"mx-5","text-sm"],["d","M256 80c0-17.7-14.3-32-32-32s-32 14.3-32 32l0 144L48 224c-17.7 0-32 14.3-32 32s14.3 32 32 32l144 0 0 144c0 17.7 14.3 32 32 32s32-14.3 32-32l0-144 144 0c17.7 0 32-14.3 32-32s-14.3-32-32-32l-144 0 0-144z"],[1,"w-full","flex","flex-col","p-4","rounded-lg","bg-gray-200"],[1,"nunito-extra-bold","uppercase","text-center","pb-4"],["placeholder","Sin comentarios...","id","txtarea","rows","4",1,"rounded-md","py-2","px-3","placeholder-gray-400","border-2","border-transparent","focus:border-gray-400","focus:ring-0","focus:outline-none",3,"ngModelChange","ngModel"],[1,"fixed","h-16","w-full","px-6","flex","justify-center","items-center","bg-transparent","bottom-4"],[1,"bg-c-orange-100","text-white","text-lg","w-full","h-full","rounded-xl","flex","justify-center","items-center","nunito-extra-bold",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 576 512",1,"size-6","fill-white","mr-2"],["d","M0 24C0 10.7 10.7 0 24 0L69.5 0c22 0 41.5 12.8 50.6 32l411 0c26.3 0 45.5 25 38.6 50.4l-41 152.3c-8.5 31.4-37 53.3-69.5 53.3l-288.5 0 5.4 28.5c2.2 11.3 12.1 19.5 23.6 19.5L488 336c13.3 0 24 10.7 24 24s-10.7 24-24 24l-288.3 0c-34.6 0-64.3-24.6-70.7-58.5L77.4 54.5c-.7-3.8-4-6.5-7.9-6.5L24 48C10.7 48 0 37.3 0 24zM128 464a48 48 0 1 1 96 0 48 48 0 1 1 -96 0zm336-48a48 48 0 1 1 0 96 48 48 0 1 1 0-96zM252 160c0 11 9 20 20 20l44 0 0 44c0 11 9 20 20 20s20-9 20-20l0-44 44 0c11 0 20-9 20-20s-9-20-20-20l-44 0 0-44c0-11-9-20-20-20s-20 9-20 20l0 44-44 0c-11 0-20 9-20 20z"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"nav",1)(2,"div",2)(3,"div",3),x("click",function(){return o.returnToShoppingCart()}),u(),i(4,"svg",4),m(5,"path",5),r()(),y(),i(6,"div",6),u(),i(7,"svg",7),m(8,"path",8),r()()()(),I(9,Ce,33,12,"section",9),r()),t&2&&(f("ngClass",T(2,he,o.isFadingOut)),a(9),M(9,o.item?9:-1))},dependencies:[z,k,L,ae,ne,oe,re],styles:["@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translate3d(0,100%,0)}to{opacity:1;transform:translateZ(0)}}.fadeInUp[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeInUp;animation-duration:.5s}@keyframes _ngcontent-%COMP%_fadeOutDown{0%{opacity:1}to{opacity:0;transform:translate3d(0,100%,0)}}.fadeOutDown[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeOutDown;animation-duration:.5s}#txtarea[_ngcontent-%COMP%]:focus{box-shadow:none}"]})}}return n})();var ve=["modalContainer"],ue=n=>({"opacity-50 cursor-not-allowed":n});function ye(n,C){if(n&1&&(i(0,"span",20),s(1),r()),n&2){let e=C.$implicit;a(),p(" ",e.description," ")}}function we(n,C){if(n&1&&$(0,ye,2,1,"span",20,U),n&2){let e=l().$implicit,t=l();W(t.getActivePromotions(e))}}function Ie(n,C){if(n&1&&(i(0,"h3",21),s(1),S(2,"currency"),r()),n&2){let e=l(2).$implicit,t=l();a(),p("MX ",b(2,1,t.getDiscountedPrice(e).originalPrice),"")}}function Se(n,C){if(n&1&&(i(0,"h3",11),s(1),S(2,"currency"),I(3,Ie,3,3,"h3",21),r()),n&2){let e=l().$implicit,t=l();a(),p(" MX ",b(2,2,t.getDiscountedPrice(e).discountedPrice)," "),a(2),M(3,t.hasPromotion(e)?3:-1)}}function be(n,C){if(n&1&&(i(0,"p",19),s(1),r()),n&2){let e=l().$implicit;a(),p("** ",e.additionalInstructions,"")}}function Me(n,C){if(n&1){let e=K();i(0,"div",3)(1,"div",4),m(2,"img",5),i(3,"div",6)(4,"h3",7),s(5),i(6,"span",8),s(7,"X"),r(),s(8),I(9,we,2,0),r(),i(10,"p",9),s(11),r()()(),i(12,"div",10),I(13,Se,4,4,"h3",11),i(14,"div",12)(15,"div",13),x("click",function(){let o=_(e).$implicit,c=l();return v(c.isKitchenOpen?c.insertarComponente(o.id):null)}),u(),i(16,"svg",14),m(17,"path",15),r()(),y(),i(18,"div",16),x("click",function(){let o=_(e).$implicit,c=l();return v(c.isKitchenOpen?c.deleteCartItem(o.id):null)}),u(),i(19,"svg",17),m(20,"path",18),r()()()(),I(21,be,2,1,"p",19),r()}if(n&2){let e=C.$implicit,t=l();a(2),f("src",e.image?e.image:"assets/img/no-image.svg",F),a(3),p(" ",e.quantity," "),a(3),p(" ",e.name," "),a(),M(9,t.hasPromotion(e)?9:-1),a(2),O(e.description),a(2),M(13,t.getDiscountedPrice(e)?13:-1),a(2),f("ngClass",T(11,ue,!t.isKitchenOpen)),G("disabled",t.isKitchenOpen?null:!0),a(3),f("ngClass",T(13,ue,!t.isKitchenOpen)),G("disabled",t.isKitchenOpen?null:!0),a(3),M(21,e.additionalInstructions!==""?21:-1)}}var fe=(()=>{class n{constructor(e,t,o){this.router=e,this.injector=t,this.promotions2Service=o,this.cartService=g(h),this.totalPriceSignal=this.cartService.getTotalPriceSignal(),this.cartItemsCount=g(h).getCartItemsCount(),this._menuService=g(h).getMenu,this.cartItems=V(()=>this.cartService.cartItemsValue),this.promotions=V(()=>this.cartService.getPromotionsSignal()()),this.isKitchenOpen=!0}ngOnInit(){this.cartService.updateCartItemsWithImage()}getDiscountedPrice(e){let t=e.quantity,o=e.price,c=o*t,H=this.promotions();if(!Array.isArray(H))return{originalPrice:c,discountedPrice:c};let xe=H.filter(d=>d.categories.includes(e.category)&&d.enabled),R={"3X2TYT3A5":d=>d-Math.floor(d/3),TEST50OFF:d=>Math.ceil(d*.5),TEST2X1:d=>d-Math.floor(d/2)},A=t;xe.forEach(d=>{R[d.id]&&(A=R[d.id](A))});let ge=o*A;return{originalPrice:c,discountedPrice:ge}}hasPromotion(e){return this.promotions().some(t=>t.enabled&&t.categories.includes(e.category))}getActivePromotions(e){return this.promotions().filter(t=>t.enabled&&t.categories.includes(e.category))}insertarComponente(e){this.container.length>0&&this.container.clear();let t=this.container.createComponent(pe,{injector:this.injector});t.instance.itemId=e,t.instance.cerrar.subscribe(()=>t?.destroy())}deleteCartItem(e){this.cartService.deleteCartItem(e)}static{this.\u0275fac=function(t){return new(t||n)(w(Q),w(j),w(se))}}static{this.\u0275cmp=P({type:n,selectors:[["app-cart-items"]],viewQuery:function(t,o){if(t&1&&B(ve,5,N),t&2){let c;D(c=q())&&(o.container=c.first)}},inputs:{isKitchenOpen:"isKitchenOpen"},standalone:!0,features:[E],decls:4,vars:1,consts:[["modalContainer",""],[1,"px-4","pb-28"],["class","bg-white py-4 border-b border-gray-300",4,"ngFor","ngForOf"],[1,"bg-white","py-4","border-b","border-gray-300"],[1,"flex","items-start","mb-2"],["alt","no-image",1,"w-16","h-16","mr-4","rounded-lg",3,"src"],[1,"flex-1","flex","flex-col","h-16"],[1,"nunito-extra-bold","flex-grow","uppercase","text-base","flex","flex-row","items-center"],[1,"text-xs","mx-1.5"],[1,"text-gray-600","nunito-regular","line-clamp-2","text-xs"],[1,"flex","flex-row","justify-between","pl-20"],[1,"nunito-extra-bold","uppercase","text-base"],[1,"flex","flex-row","items-center","justify-between"],[1,"flex","justify-center","items-center","h-6","w-6","rounded-full","bg-amber-500",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 512 512",1,"size-3","fill-white"],["d","M362.7 19.3L314.3 67.7 444.3 197.7l48.4-48.4c25-25 25-65.5 0-90.5L453.3 19.3c-25-25-65.5-25-90.5 0zm-71 71L58.6 323.5c-10.4 10.4-18 23.3-22.2 37.4L1 481.2C-1.5 489.7 .8 498.8 7 505s15.3 8.5 23.7 6.1l120.3-35.4c14.1-4.2 27-11.8 37.4-22.2L421.7 220.3 291.7 90.3z"],[1,"flex","justify-center","items-center","ml-3","h-6","w-6","rounded-full","bg-red-700",3,"click","ngClass"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 448 512",1,"size-3","fill-white"],["d","M135.2 17.7C140.6 6.8 151.7 0 163.8 0L284.2 0c12.1 0 23.2 6.8 28.6 17.7L320 32l96 0c17.7 0 32 14.3 32 32s-14.3 32-32 32L32 96C14.3 96 0 81.7 0 64S14.3 32 32 32l96 0 7.2-14.3zM32 128l384 0 0 320c0 35.3-28.7 64-64 64L96 512c-35.3 0-64-28.7-64-64l0-320zm96 64c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16zm96 0c-8.8 0-16 7.2-16 16l0 224c0 8.8 7.2 16 16 16s16-7.2 16-16l0-224c0-8.8-7.2-16-16-16z"],[1,"nunito-extra-bold","text-xs","mt-2","text-c-orange-100"],[1,"inline-flex","items-center","rounded-md","bg-green-500","shadow-md","text-white","text-xs","px-2","py-0.5","ml-4","nunito-extra-bold"],[1,"text-xs","line-through"]],template:function(t,o){t&1&&(i(0,"section",1),I(1,Me,22,15,"div",2),r(),m(2,"div",null,0)),t&2&&(a(),f("ngForOf",o.cartItems()))},dependencies:[z,k,te,L]})}}return n})();var Oe=n=>({"opacity-50 cursor-not-allowed":n}),tt=(()=>{class n{constructor(e,t,o){this.route=e,this.router=t,this.injector=o,this.title="Carrito de compra",this.totalPriceSignal=g(h).getTotalPriceSignal(),this.cartItemsCount=g(h).getCartItemsCount(),this.kitchenStatusService=g(ce),this.isKitchenOpen=V(()=>this.kitchenStatusService.isKitchenOpen())}ngOnInit(){}goToHome(){this.router.navigate(["/home"])}goToCheckout(){this.totalPriceSignal()>0&&this.router.navigate(["/checkout"])}static{this.\u0275fac=function(t){return new(t||n)(w(ie),w(Q),w(j))}}static{this.\u0275cmp=P({type:n,selectors:[["app-shopping-cart"]],viewQuery:function(t,o){if(t&1&&B(le,5),t&2){let c;D(c=q())&&(o.checkoutComponent=c.first)}},standalone:!0,features:[E],decls:16,vars:10,consts:[[1,"h-16","flex","flex-row","items-center","px-4","text-gray-800","fill-gray-800"],[1,"space-x-2","p-2","rounded-full","shadow-xl",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 320 512",1,"size-6"],["d","M41.4 233.4c-12.5 12.5-12.5 32.8 0 45.3l160 160c12.5 12.5 32.8 12.5 45.3 0s12.5-32.8 0-45.3L109.3 256 246.6 118.6c12.5-12.5 12.5-32.8 0-45.3s-32.8-12.5-45.3 0l-160 160z"],[1,"nunito-extra-bold","ml-4","w-full","text-[20px]"],[3,"isKitchenOpen"],[1,"flex","flex-row","items-center","justify-between","bg-c-beige-100","h-24","px-6","fixed","bottom-0","left-0","right-0","z-40","rounded-t-3xl"],[1,"nunito-extra-bold"],[1,"text-gray-800",2,"font-size","24px"],[1,"text-c-orange-100",2,"font-size","12px"],["type","button",1,"w-32","py-3","bg-c-orange-100","rounded-xl","nunito-extra-bold","text-white",2,"font-size","14px",3,"click","disabled","ngClass"]],template:function(t,o){t&1&&(i(0,"div",0)(1,"div",1),x("click",function(){return o.goToHome()}),u(),i(2,"svg",2),m(3,"path",3),r()(),y(),i(4,"p",4),s(5),r()(),m(6,"app-cart-items",5),i(7,"footer",6)(8,"div",7)(9,"p",8),s(10),S(11,"currency"),r(),i(12,"p",9),s(13,"Total del pedido + IVA(16%)"),r()(),i(14,"button",10),x("click",function(){return o.goToCheckout()}),s(15),r()()),t&2&&(a(5),O(o.title),a(),f("isKitchenOpen",o.isKitchenOpen()),a(4),p("MX ",b(11,6,o.totalPriceSignal()),""),a(4),f("disabled",!o.isKitchenOpen())("ngClass",T(8,Oe,!o.isKitchenOpen())),a(),p(" ",o.isKitchenOpen()?"Siguiente":"Cerrado"," "))},dependencies:[z,k,L,fe],styles:["@keyframes _ngcontent-%COMP%_fadeInLeft{0%{opacity:0;transform:translate3d(-100%,0,0)}to{opacity:1;transform:translateZ(0)}}.fadeInLeft[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeInLeft;animation-duration:.3s}@keyframes _ngcontent-%COMP%_fadeOutLeft{0%{opacity:1}to{opacity:0;transform:translate3d(-100%,0,0)}}.fadeOutLeft[_ngcontent-%COMP%]{animation-name:_ngcontent-%COMP%_fadeOutLeft;animation-duration:.3s}"]})}}return n})();export{tt as ShoppingCartComponent};
